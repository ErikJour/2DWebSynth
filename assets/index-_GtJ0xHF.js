import{S as Pn,O as bn,W as Mn,V as Sn,R as Ln,M as Gn,N as xn,g as ie,F as Cn,L as En,s as Rn,a as Fn,C as j,T as Wn,b as wt,c as ae,D as re,d as ce,e as Wt,G as f,f as kn,h as d,i as pt,E as ht,j as Hn,A as On,B as kt,k as Y,l as G,P as x,m as w,n as C,o as Tn,p as zn,q as Dn}from"./vendor-Bv_zqxSs.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();const r=new Pn,Ht=document.querySelector("canvas.webgl"),i=new Sn,c=new Ln,L={width:window.innerWidth,height:window.innerHeight},Et=window.innerWidth/window.innerHeight,Re=10,u=new bn(-10*Et,Re*Et,Re,-10,.1,1e3);u.position.set(0,0,45);const U=new Mn({canvas:Ht,antialias:!0});U.setSize(L.width,L.height);U.setPixelRatio(Math.min(window.devicePixelRatio,2));window.addEventListener("resize",()=>{L.width=window.innerWidth,L.height=window.innerHeight;const e=L.width/L.height;u.left=-10*e,u.right=Re*e,u.top=Re,u.bottom=-10,u.updateProjectionMatrix(),U.setSize(L.width,L.height),U.setPixelRatio(Math.min(window.devicePixelRatio,2))});window.addEventListener("mousemove",e=>{i.x=e.clientX/L.width*2-1,i.y=-(e.clientY/L.height)*2+1});const h=new Gn({oscillator:{type:"sine"},envelope:{attack:.01,decay:.1,sustain:.9,release:.01}});h.envelope.set({attack:.05,decay:.1,sustain:.2,release:.2});const W=new xn;h.volume.value=ie(0);h.oscillator.type="sine";W.envelope.set({attack:.05,decay:.1,sustain:.2,release:.2});h.filter.frequency.value=0;const O=new Cn({type:"lowpass",frequency:2e4,rolloff:-24,Q:1}).toDestination();h.filterEnvelope.attack=0;h.filterEnvelope.decay=0;h.filterEnvelope.sustain=0;h.filterEnvelope.release=0;h.connect(O);W.connect(O);const le=new En({frequency:20,min:-50,max:50});le.amplitude.value=1;le.connect(h.detune);O.attack=0;O.decay=0;O.sustain=0;O.release=0;W.volume.value=ie(0);window.addEventListener("click",async()=>{await Rn(),le.start(),console.log("Audio Context Started")});Fn().start();const An=new j(13145664),jn=new j(16746496),k=new j(33413),b={neutraBeige:"#D9D4C5",sageGreen:"#A8B79A",warmGray:"#A9A39B",terracotta:"#C67650",paleSkyBlue:"#9EB8C2",oliveBrown:"#5A5A44",sunlitSand:"#E5C69F",mutedTeal:"#6E8D90",charcoalGray:"#4A4A4A"};new j(b.terracotta).lerp(new j(8421504),.001);new j(k).lerp(new j(8421504),.2);const M=new Wn;M.load("textures/stainedGlassA.png");M.load("textures/OceanWave.jpeg");const Yn=M.load("textures/stainedGlassWaveB.jpg");M.load("textures/stainedGlassD.jpg");M.load("textures/Greydient4A_silk_3.png");M.load("textures/Greydient4A_texture1_5.jpg");M.load("textures/Greydient4B_texture1_6.jpg");M.load("textures/Greydient4C_texture1_3.jpg");M.load("matcaps/0_export_2.png");const qn=M.load("matcaps/0_export_6.png");M.load("matcaps/0_export_25.png");const Xn=M.load("matcaps/export_92_blur.png"),g=new wt({color:b.neutraBeige}),S=new wt({color:b.sunlitSand}),de=new ae({color:k,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:re}),$n=new ae({color:k,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:re}),Bn=new ae({color:k,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:re}),Nn=new ae({color:k,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:re}),_n=new ae({color:k,emissive:4521796,emissiveIntensity:.9,transparent:!0,opacity:.25,side:re});new ce({map:Yn,color:16755268,emissive:16729344,emissiveIntensity:.5,transparent:!1,opacity:.7});new ce({color:b.neutraBeige,emissiveIntensity:.2,transparent:!1,opacity:1});const ee=new ce({color:k,opacity:.5,transparent:!0,roughness:.5,metalness:.1}),E=new ce({color:k,transparent:!0,opacity:.3,roughness:.5,metalness:.1}),Ot=new ce({color:jn});Ot.roughness=.4;Ot.metalness=.1;const Ye=new Wt({color:b.terracotta});Ye.matcap=qn;Ye.roughness=.4;Ye.metalness=.1;const mt=new Wt({color:An});mt.matcap=Xn;mt.roughness=.9;mt.metalness=.1;const R=new f;function Tt(e,t,o){const n=new kn(1,32),s=new d(n,de);s.position.set(e,t,-1),s.scale.set(1,1,1),R.add(s)}const In=-1.3,Kn=1,zt=-1,Dt=3;for(let e=0;e<3;e++)Tt(zt+e*Dt,In);for(let e=3;e<5;e++)Tt(zt+(e-3)*Dt+1.4,Kn);const Le=R.children[0];Le.material=de;const Ge=R.children[3];Ge.material=$n;const xe=R.children[1];xe.material=Bn;const Ce=R.children[4];Ce.material=Nn;const Ee=R.children[2];Ee.material=_n;R.position.set(-2,-7,0);const Vn=16,Un=64,Qn=1,Jn=.866,Zn=.02,eo=.05,to=4;function yt(e,t,o,n,s,a){const p=new pt,l=1e-5,y=e/a;p.moveTo(-e/2,0);for(let v=0;v<=a;v++){const D=-e/2+v*y,F=Math.sin(v/a*Math.PI*2)*(t/2);v===0?p.lineTo(D,F):p.quadraticCurveTo(D-y/2,F,D,F)}for(let v=a;v>=0;v--){const D=-e/2+v*y,F=Math.sin(v/a*Math.PI*2)*(t/2);p.lineTo(D,F+l)}const T={steps:1,depth:o,bevelEnabled:!0,bevelThickness:n,bevelSize:n,bevelSegments:4},z=new ht(p,T);return z.center(),z}const ft=1.33,H=.65,vt=.001,gt=.0665,no=yt(ft,H,vt,gt,16,64),Q=new d(no,de);Q.visible=!0;function Pt(e,t,o,n,s){const a=new pt,l=n-1e-5;a.moveTo(0,l),a.lineTo(0,t-l),a.quadraticCurveTo(0,t,l,t),a.lineTo(e-l,t),a.quadraticCurveTo(e,t,e,t-l),a.lineTo(e,l),a.quadraticCurveTo(e,0,e-l,0),a.lineTo(l,0),a.quadraticCurveTo(0,0,0,l);const y=new ht(a,{depth:o-n*2,bevelEnabled:!0,bevelSegments:s*2,steps:1,bevelSize:n,bevelThickness:n,curveSegments:s});return y.center(),y}const oo=Pt(.8,.8,.15,.05,16),J=new d(oo,de);J.visible=!1;function ue(e,t,o,n,s){const a=new pt,l=n-1e-5,y=e/2;a.moveTo(-y+l,-t/2),a.lineTo(y-l,-t/2),a.quadraticCurveTo(y,-t/2,y,-t/2+l),a.lineTo(l,t/2-l),a.quadraticCurveTo(0,t/2,-l,t/2-l),a.lineTo(-y,-t/2+l),a.quadraticCurveTo(-y,-t/2,-y+l,-t/2);const T={steps:1,depth:o,bevelEnabled:!0,bevelThickness:n,bevelSize:n,bevelSegments:s},z=new ht(a,T);return z.center(),z}const so=ue(1,.866,.1,.05,4),Z=new d(so,de);Z.visible=!1;const io=yt(ft/3,H/3,vt/3,gt/3,Vn,Un),bt=new d(io,ee);bt.position.set(0,H/2+.65,-60);const ao=ue(Qn/3,Jn/3,Zn/3,eo/3,to),Mt=new d(ao,ee),ro=Pt(.8/3,.8/3,.8/3,.05/3,16),St=new d(ro,ee),co=.7;Mt.position.set(-.7,H/2+.5,-60);St.position.set(co,H/2+.5,-60);bt.visible=!0;Mt.visible=!0;St.visible=!0;const Lt=new f;Lt.add(bt);Lt.add(Mt);Lt.add(St);class lo{constructor(t,o,n,s,a,p,l){this.raycaster=t,this.camera=o,this.rings=n,this.synth=s,this.noise=a,this.colorPalette=p,this.tunnelColor=l,this.mouse=i,this.isHoldingRootRing=!1,this.isHoldingThirdRing=!1,this.isHoldingFourth=!1,this.isHoldingFifth=!1,this.isHoldingSeventh=!1,this.isNoteOn=!1,this.octaveOffset=0,this.activeKey=null,this.initListeners()}initListeners(){window.addEventListener("mousedown",t=>this.handleMouseDown(t)),window.addEventListener("mouseup",t=>this.handleMouseUp(t)),window.addEventListener("keydown",t=>this.handleKeyDown(t)),window.addEventListener("keyup",t=>this.handleKeyUp(t))}handleMouseDown(t){}handleMouseUp(){}handleKeyDown(t){t.preventDefault();const o=t.key;if(this.activeKey!=o)switch(this.activeKey=o,this.isNoteOn=!0,o){case"j":this.isHoldingRootRing=!0,this.playNote("D3",Le,.2);break;case"k":this.isHoldingFourth=!0,this.playNote("G3",xe,.5);break;case"l":this.isHoldingSeventh=!0,this.playNote("C4",Ee,.8);break;case"i":this.isHoldingThirdRing=!0,this.playNote("F#3",Ge,.3);break;case"o":this.isHoldingFifth=!0,this.playNote("A3",Ce,.6);break;case"ArrowLeft":this.octaveOffset=Math.max(this.octaveOffset-1,-2),console.log(`Octave: ${this.octaveOffset}`);break;case"ArrowRight":this.octaveOffset=Math.min(this.octaveOffset+1,2),console.log(`Octave: ${this.octaveOffset}`);break}}handleKeyUp(){this.isNoteOn=!1,this.activeKey=null,this.releaseNote()}playNote(t,o,n){const s=t.slice(0,-1),p=parseInt(t.slice(-1))+this.octaveOffset,l=`${s}${p}`;if(!/^[A-G]#?\d$/.test(l)){console.error(`Invalid note format: ${l}`);return}console.log(`Playing note: ${l}`),this.synth.triggerAttack(l),this.noise.triggerAttack(),this.oscillationFrequency=n,o.material.color.set(this.colorPalette.paleSkyBlue),o.material.opacity=.9}releaseNote(){this.synth.triggerRelease(),this.noise.triggerRelease(),this.isHoldingRootRing&&(Le.material.color.set(this.tunnelColor),Le.material.opacity=.25,this.isHoldingRootRing=!1),this.isHoldingThirdRing&&(Ge.material.color.set(this.tunnelColor),Ge.material.opacity=.25,this.isHoldingThirdRing=!1),this.isHoldingFourth&&(xe.material.color.set(this.tunnelColor),xe.material.opacity=.25,this.isHoldingFourth=!1),this.isHoldingFifth&&(Ce.material.color.set(this.tunnelColor),Ce.material.opacity=.25,this.isHoldingFifth=!1),this.isHoldingSeventh&&(Ee.material.color.set(this.tunnelColor),Ee.material.opacity=.25,this.isHoldingSeventh=!1)}}r.add(u);r.add(R);u.add(R);u.lookAt(0,0,0);const P=0,uo=R.children,wo=b.paleSkyBlue,po=k;new lo(c,u,uo,h,W,wo,po);U.setClearColor(b.oliveBrown);r.fog=new Hn(b.sunlitSand,10,75);const At=new On;r.add(At);At.intensity=.5;const Gt=[];Gt.push(new w(-100,0,0));Gt.push(new w(200,0,0));const qe=new kt().setFromPoints(Gt),jt=new Y(qe,g);r.add(jt);jt.position.set(0,-4,0);const Yt=new Y(qe,g);r.add(Yt);Yt.position.set(0,3,P);const qt=new Y(qe,g);r.add(qt);qt.position.set(-65,-26,P);const Xt=new Y(qe,g);r.add(Xt);Xt.position.set(-65,-48,P);const xt=[];xt.push(new w(0,1,0));xt.push(new w(0,-6,0));const Ct=new kt().setFromPoints(xt),$t=new Y(Ct,g);r.add($t);$t.position.set(-7,9,0);const Bt=new Y(Ct,g);r.add(Bt);Bt.position.set(0,2,0);const Nt=new Y(Ct,g);r.add(Nt);Nt.position.set(7,9,P);const ho=16,mo=64,yo=1,fo=.866,vo=.02,go=.05,Po=4;let Rt="sine";const m=1,Xe=-10.2,bo=.75;r.add(Q);Q.scale.set(m,m,m);Q.position.set(Xe,5,P);r.add(Z);Z.position.set(Xe,5,P);Z.scale.set(m,m,m);r.add(J);J.position.set(Xe,5,P);J.scale.set(m,m,m);const Mo=yt(ft,H,vt,gt,ho,mo),te=new d(Mo,ee);te.position.set(0,H/2+.65,0);r.add(te);te.scale.set(m/2,m/2,m/2);const So=ue(yo,fo,vo,go,Po),ne=new d(So,ee);ne.scale.set(m/2,m/2,m/2);r.add(ne);const Lo=Pt(.8,.8,.2,.05,16),oe=new d(Lo,ee);oe.scale.set(m/2,m/2,m/2);r.add(oe);const Go=1;ne.position.set(-1,H/2+.5,0);oe.position.set(Go,H/2+.5,0);te.visible=!0;ne.visible=!0;oe.visible=!0;const we=new f;we.add(te);we.add(ne);we.add(oe);r.add(we);we.position.set(Xe,bo+5,0);const Ft=[{mesh:te,shape:"sine"},{mesh:ne,shape:"pyramid"},{mesh:oe,shape:"cube"}];window.addEventListener("click",e=>{var o;i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=c.intersectObjects([...Ft.map(n=>n.mesh)]);if(t.length>0){const n=t[0].object,s=(o=Ft.find(a=>a.mesh===n))==null?void 0:o.shape;s&&xo(s)}});function xo(e){e!==Rt&&(Q.visible=e==="sine",Z.visible=e==="pyramid",J.visible=e==="cube",e==="sine"?(Q.visible=!0,h.oscillator.type="sine"):e==="pyramid"?(Z.visible=!0,h.oscillator.type="triangle"):e==="cube"&&(J.visible=!0,h.oscillator.type="square"),Rt=e)}const pe=new f,Co=.15;h.volume.value=ie(Co);const Fe=6,nt=.5,Eo=.1;for(let e=0;e<Fe;e++){const t=new G(Eo,16,16),o=new d(t,E.clone());o.position.set(2.5,e*nt,0),pe.add(o)}let A=null;window.addEventListener("mousedown",e=>{i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=c.intersectObjects(pe.children);t.length>0&&(A=t[0].object,A.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(A){i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=new x(new w(0,0,1),-A.position.z),o=new w;c.ray.intersectPlane(t,o);const n=C.clamp(o.y-4,0,Fe*nt);A.position.y=n;const s=n/(Fe*nt);_t(s*100),h.volume.value=ie(s/2),A.visible=!0}});window.addEventListener("mouseup",()=>{A=null});function _t(e){const t=Math.round(e/100*Fe);pe.children.forEach((o,n)=>{o.material.opacity=n<t?1:.3})}_t(15);r.add(pe);pe.position.set(-21,4,0);const he=new f;r.add(he);const We=6,ot=.5,Ro=.1;for(let e=0;e<We;e++){const t=new G(Ro,16,16),o=new d(t,E.clone());o.position.set(2.5,e*ot,-5),he.add(o)}let q=null;window.addEventListener("mousedown",e=>{i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=c.intersectObjects(he.children);t.length>0&&(q=t[0].object,q.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(q){const t=Ht.getBoundingClientRect();i.x=(e.clientX-t.left)/t.width*2-1,i.y=-((e.clientY-t.top)/t.height)*2+1,c.setFromCamera(i,u);const o=new x(new w(0,0,1),-q.position.z),n=new w;c.ray.intersectPlane(o,n);const s=C.clamp(n.y-4,0,We*ot);q.position.y=s;const a=s/(We*ot);W.volume.value=ie(a/3),Fo(a*100)}});window.addEventListener("mouseup",()=>{q=null});function Fo(e){const t=Math.round(e/100*We);he.children.forEach((o,n)=>{o.material.opacity=n<t?1:.3})}he.position.set(-2.5,4,0);const me=new f;r.add(me);const ke=6,st=.5,Wo=.1;for(let e=0;e<ke;e++){const t=new G(Wo,16,16),o=new d(t,E.clone());o.position.set(1.5,e*st,-10),me.add(o)}let X=null;window.addEventListener("mousedown",e=>{i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=c.intersectObjects(me.children);t.length>0&&(X=t[0].object,X.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(X){i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=new x(new w(0,0,1),-X.position.z),o=new w;c.ray.intersectPlane(t,o);const n=C.clamp(o.y-4,0,ke*st);X.position.y=n;const s=n/(ke*st),a=20,l=a*Math.pow(2e4/a,s);O.frequency.value=l,console.log("Logarithmic Filter Cutoff Frequency:",l),console.log(s*2e4),ko(s*100)}});window.addEventListener("mouseup",()=>{X=null});function ko(e){const t=Math.round(e/100*ke);me.children.forEach((o,n)=>{o.material.opacity=n<t?1:.3})}me.position.set(9,4,0);const ye=new f;r.add(ye);const He=6,it=.5,Ho=.1;for(let e=0;e<He;e++){const t=new G(Ho,16,16),o=new d(t,E.clone());o.position.set(1.5,e*it,-10),ye.add(o)}let $=null;window.addEventListener("mousedown",e=>{i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=c.intersectObjects(ye.children);t.length>0&&($=t[0].object,$.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if($){i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=new x(new w(0,0,1),-$.position.z),o=new w;c.ray.intersectPlane(t,o);const n=C.clamp(o.y-4,0,He*it);$.position.y=n;const s=n/(He*it),a=20,l=a*Math.pow(100/a,s);O.Q.value=l/10,console.log("Logarithmic Q",l),console.log(s),Oo(s*100)}});window.addEventListener("mouseup",()=>{$=null});function Oo(e){const t=Math.round(e/100*He);ye.children.forEach((o,n)=>{o.material.opacity=n<t?1:.3})}ye.position.set(15.5,4,0);const fe=new f;r.add(fe);const Oe=6,at=.5,To=.1;for(let e=0;e<Oe;e++){const t=new G(To,16,16),o=new d(t,E.clone());o.position.set(0,e*at,0),fe.add(o)}let B=null;window.addEventListener("mousedown",e=>{i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=c.intersectObjects(fe.children);t.length>0&&(B=t[0].object,B.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(B){i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=new x(new w(0,0,1),-B.position.z),o=new w;c.ray.intersectPlane(t,o);const n=C.clamp(o.y+3,0,Oe*at);B.position.y=n;const s=n/(Oe*at);console.log(`Volume Level: ${s.toFixed(2)}`),h.envelope.attack=s,W.envelope.attack=s,It(s*100)}});window.addEventListener("mouseup",()=>{B=null});function It(e){const t=Math.round(e/100*Oe);fe.children.forEach((o,n)=>{n<t?o.material.opacity=1:o.material.opacity=.3})}It(10);fe.position.set(4.5,-3,0);const ve=new f;r.add(ve);const Te=6,rt=.5,zo=.1;for(let e=0;e<Te;e++){const t=new G(zo,16,16),o=new d(t,E.clone());o.position.set(0,e*rt,0),ve.add(o)}let N=null;window.addEventListener("mousedown",e=>{i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=c.intersectObjects(ve.children);t.length>0&&(N=t[0].object,N.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(N){i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=new x(new w(0,0,1),-N.position.z),o=new w;c.ray.intersectPlane(t,o);const n=C.clamp(o.y+3,0,Te*rt);N.position.y=n;const s=n/(Te*rt);h.envelope.decay=s,W.envelope.decay=s,console.log(`Decay Level: ${s.toFixed(2)}`),Kt(s*100)}});window.addEventListener("mouseup",()=>{N=null});function Kt(e){const t=Math.round(e/100*Te);ve.children.forEach((o,n)=>{n<t?o.material.opacity=1:o.material.opacity=.3})}Kt(10);ve.position.set(8.25,-3,0);const ge=new f;r.add(ge);const ze=6,ct=.5,Do=.1;for(let e=0;e<ze;e++){const t=new G(Do,16,16),o=new d(t,E.clone());o.position.set(0,e*ct,0),ge.add(o)}let _=null;window.addEventListener("mousedown",e=>{i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=c.intersectObjects(ge.children);t.length>0&&(_=t[0].object,_.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(_){i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=new x(new w(0,0,1),-_.position.z),o=new w;c.ray.intersectPlane(t,o);const n=C.clamp(o.y+3,0,ze*ct);_.position.y=n;const s=n/(ze*ct);h.envelope.sustain=s,W.envelope.sustain=s,Vt(s*100)}});window.addEventListener("mouseup",()=>{_=null});function Vt(e){const t=Math.round(e/100*ze);ge.children.forEach((o,n)=>{n<t?o.material.opacity=1:o.material.opacity=.3})}Vt(10);ge.position.set(12.35,-3,0);const Pe=new f;r.add(Pe);const De=6,lt=.5,Ao=.1;for(let e=0;e<De;e++){const t=new G(Ao,16,16),o=new d(t,E.clone());o.position.set(0,e*lt,0),Pe.add(o)}let I=null;window.addEventListener("mousedown",e=>{i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=c.intersectObjects(Pe.children);t.length>0&&(I=t[0].object,I.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(I){i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=new x(new w(0,0,1),-I.position.z),o=new w;c.ray.intersectPlane(t,o);const n=C.clamp(o.y+3,0,De*lt);I.position.y=n;const s=n/(De*lt);h.envelope.release=s,W.envelope.release=s,Ut(s*100)}});window.addEventListener("mouseup",()=>{I=null});function Ut(e){const t=Math.round(e/100*De);Pe.children.forEach((o,n)=>{n<t?o.material.opacity=1:o.material.opacity=.3})}Ut(10);Pe.position.set(16.25,-3,0);const be=new f;r.add(be);const Ae=6,dt=.5,jo=.1;for(let e=0;e<Ae;e++){const t=new G(jo,16,16),o=new d(t,E.clone());t.center(),o.position.set(0,e*dt,0),be.add(o)}let K=null;window.addEventListener("mousedown",e=>{i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=c.intersectObjects(be.children);t.length>0&&(K=t[0].object,K.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(K){i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=new x(new w(0,0,1),-K.position.z),o=new w;c.ray.intersectPlane(t,o);const n=C.clamp(o.y+3,0,Ae*dt);K.position.y=n;const s=n/(Ae*dt),a=.01,l=a*Math.pow(20/a,s);le.frequency.value=l,Yo(l*100)}});window.addEventListener("mouseup",()=>{K=null});function Yo(e){const t=Math.round(e/100*Ae);be.children.forEach((o,n)=>{o.material.opacity=n<t?1:.3})}be.position.set(-13.1,-3,0);const Me=new f;r.add(Me);const je=6,ut=.5,qo=.1;for(let e=0;e<je;e++){const t=new G(qo,16,16),o=new d(t,E.clone());t.center(),o.position.set(0,e*ut,0),Me.add(o)}let V=null;window.addEventListener("mousedown",e=>{i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=c.intersectObjects(Me.children);t.length>0&&(V=t[0].object,V.scale.set(2,2,2))});window.addEventListener("mousemove",e=>{if(V){i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,c.setFromCamera(i,u);const t=new x(new w(0,0,1),-V.position.z),o=new w;c.ray.intersectPlane(t,o);const n=C.clamp(o.y+3,0,je*ut);V.position.y=n;const s=n/(je*ut);le.amplitude.value=s,Xo(s*100)}});window.addEventListener("mouseup",()=>{V=null});function Xo(e){const t=Math.round(e/100*je);Me.children.forEach((o,n)=>{o.material.opacity=n<t?1:.3})}Me.position.set(-5,-3,0);const Qt=1,Jt=.866,Zt=.02,en=.05,tn=4,se=new wt({color:b.sageGreen}),$o=ue(Qt,Jt,Zt,en,tn),Bo=new d($o,se);Bo.visible=!0;const Se=new f;function nn(e){const t=new f,o=ue(Qt,Jt,Zt,en,tn),n=new d(o,se);return n.position.y=0,t.add(n),t}const $e=nn();$e.scale.set(.5,.5,.5);const Be=nn();Be.scale.set(.5,.5,.5);const on=.1,sn=-.035;$e.position.set(on-1,sn,-.2);Be.position.set(on-.1,sn,-.2);$e.rotation.z=Math.PI*.5;Be.rotation.z=Math.PI*1.5;Se.add($e);Se.add(Be);r.add(Se);window.addEventListener("keydown",e=>{switch(e.preventDefault(),e.key){case"ArrowRight":se.color.set(b.sunlitSand),updateBackground();break;case"ArrowLeft":se.color.set(b.oliveBrown),updateBackground();break}});window.addEventListener("keyup",e=>{switch(e.preventDefault(),e.key){case"ArrowRight":case"ArrowLeft":se.color.set(b.sageGreen),updateBackground();break}});Se.position.set(.425,-4.5,0);u.add(Se);const No=new Tn;No.load("fonts/P22 FLLW Exhibition_Regular.json",function(e){function t(vn,gn){return new Dn(vn,{font:gn,size:8,height:.01,curveSegments:12,bevelEnabled:!0,bevelThickness:.01,bevelSize:.05,bevelOffset:0,bevelSegments:1})}const o=t("A",e);t("D",e),t("S",e),t("R",e),new zn,new d(o,Ye);const n=.1,s=t("OSCILLATOR",e),a=new d(s,g);a.position.set(-17.5,8.5,0),a.scale.set(n,n,n),r.add(a);const p=t("Noise",e),l=new d(p,g);l.position.set(-1.5,8.5,0),l.scale.set(n,n,n),r.add(l);const y=t("Filter",e),T=new d(y,g);T.position.set(12,8.5,0),T.scale.set(n,n,n),r.add(T);const z=t("LFO",e),v=new d(z,g);v.position.set(-10,1.5,0),v.scale.set(n,n,n),r.add(v);const D=t("adsr",e),F=new d(D,g);F.position.set(9,1.5,P),F.scale.set(n,n,n),r.add(F);const rn=t("Level",e),Ne=new d(rn,S);Ne.position.set(-19.25,7.5,0),Ne.scale.set(n/1.5,n/1.5,n/1.5),r.add(Ne);const cn=t("Type",e),_e=new d(cn,S);_e.position.set(-11,7.5,0),_e.scale.set(n/1.5,n/1.5,n/1.5),r.add(_e);const ln=t("Level",e),Ie=new d(ln,S);Ie.position.set(-.75,7.5,0),Ie.scale.set(n/1.5,n/1.5,n/1.5),r.add(Ie);const dn=t("Cutoff",e),Ke=new d(dn,S);Ke.position.set(9,7.5,0),Ke.scale.set(n/1.5,n/1.5,n/1.5),r.add(Ke);const un=t("Resonance",e),Ve=new d(un,S);Ve.position.set(15,7.5,0),Ve.scale.set(n/1.5,n/1.5,n/1.5),r.add(Ve);const wn=t("Attack",e),Ue=new d(wn,S);Ue.position.set(3,.5,0),Ue.scale.set(n/1.5,n/1.5,n/1.5),r.add(Ue);const pn=t("Decay",e),Qe=new d(pn,S);Qe.position.set(7,.5,0),Qe.scale.set(n/1.5,n/1.5,n/1.5),r.add(Qe);const hn=t("Sustain",e),Je=new d(hn,S);Je.position.set(11,.5,P),Je.scale.set(n/1.5,n/1.5,n/1.5),r.add(Je);const mn=t("Release",e),Ze=new d(mn,S);Ze.position.set(15,.5,P),Ze.scale.set(n/1.5,n/1.5,n/1.5),r.add(Ze);const yn=t("Rate",e),et=new d(yn,S);et.position.set(-14,.5,P),et.scale.set(n/1.5,n/1.5,n/1.5),r.add(et);const fn=t("Depth",e),tt=new d(fn,S);tt.position.set(-6,.5,P),tt.scale.set(n/1.5,n/1.5,n/1.5),r.add(tt)});function an(){requestAnimationFrame(an),U.render(r,u)}an();
